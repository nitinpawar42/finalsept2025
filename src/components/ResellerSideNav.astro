---
const { url } = Astro;
const getLinkClass = (path) => {
  const isActive = url.pathname === path;
  return `block py-2.5 px-4 rounded transition duration-200 hover:bg-green-700 ${isActive ? 'bg-green-700' : ''}`;
};
---

<aside class="bg-green-600 text-white w-64 min-h-screen p-4 flex flex-col justify-between">
  <nav>
    <a href="/reseller/dashboard" class={getLinkClass('/reseller/dashboard')}>Dashboard</a>
    <a href="/reseller/customers" class={getLinkClass('/reseller/customers')}>My Customers</a>
    <a href="/reseller/orders" class={getLinkClass('/reseller/orders')}>My Orders</a>
  </nav>

  <div>
    <button id="logout-btn" class="w-full bg-red-500 text-white font-bold py-2 px-4 rounded-lg hover:bg-red-700">Logout</button>
  </div>
</aside>

<script>
  import { auth } from '../firebase/client';
  import { signOut } from 'firebase/auth';

  const logoutBtn = document.getElementById('logout-btn');
  logoutBtn.addEventListener('click', async () => {
    try {
      await signOut(auth);
      window.location.href = '/login';
    } catch (error) {
      console.error('Error signing out:', error);
    }
  });
</script>
