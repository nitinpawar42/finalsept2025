---
import { db } from '../firebase/admin.js';
import { resellers, products } from '../data/mock.js';

let message = "Starting the seeding process...";

try {
  console.log("Seeding resellers...");
  for (const reseller of resellers) {
    await db.collection("resellers").doc(reseller.id).set(reseller);
  }
  console.log("Resellers seeded successfully!");

  console.log("Seeding products...");
  for (const product of products) {
    await db.collection("products").add(product);
  }
  console.log("Products seeded successfully!");

  message = "Database seeded successfully! You can now delete the /src/pages/seed.astro file.";

} catch (error) {
  console.error("Error seeding database:", error);
  message = "There was an error seeding the database. Please check the logs.";
}
---

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Seeding Database</title>
</head>
<body>
  <h1>{message}</h1>
</body>
</html>
